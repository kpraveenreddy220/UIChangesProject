<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/html/sdk/assets/css/styles.css">
  <link  rel="stylesheet" href="/html/sdk/components/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/html/sdk/components/bootstrap-3.3.7/css/bootstrap-theme.min.css">

  <script type="text/javascript" src="/html/sdk/components/jquery-2.2.4/jquery.js"></script>
  <script type="text/javascript" src="/html/sdk/components/bootstrap-3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/html/sdk/components/mustache-2.3.0/mustache.min.js"></script>
      <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/ace.js"></script>
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/ext-static_highlight.js"></script>
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/mode-xml.js"></script>
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/theme-chrome.js"></script>

  <script type="text/javascript" src="/html/sdk/assets/js/app.js"></script>
  <style>
  table, th, td {                                                            
      border: 1px solid black;                                                 
      border-collapse: collapse;                                               
      padding: 10px;                                                           
    }                                                                          
    th {                                                                       
      height: 20px;                                                            
      vertical-align: middle;                                                  
    }     
  </style>
  <script>
    function APIpageShow(){
    	var url = terminalHostname + "/cgi-bin/page/show";
        var httpRequestType = "GET";
        var data = 'path=sdk/one_button.html';
        $.ajax({ type : httpRequestType,
            url: url,
            data : data,
            async: false,
            dataType: "text",   //have to do 'text' in order to show raw response
            success : function(response) {
                $("#getPageShowRequest").text(httpRequestType + " " + url + "?" + data);
                $("#getPageShowResponse").text(response);
            }
        });
    }

        function APIpromptClear(div_id){      
        	var url = terminalHostname + '/cgi-bin/prompt/clear';
            var httpRequestType = "GET";
            $.ajax({ type : httpRequestType,
                url: url,
                async: false,
                dataType: "text",   //have to do 'text' in order to show raw response
                success : function(response) {
                    $("#getPromptClearRequest").text(httpRequestType + " " + url);
                    $("#getPromptClearResponse").text(response);
                }
            });
          }

        function APIpromptButton(){
        	var url = terminalHostname + '/cgi-bin/prompt/button';
            var httpRequestType = "POST";
            var httpRequestBody ='<?xml version="1.0"?>\n'+
            		'<promptButton>\n'+
            		'<name>userResponse</name>\n'+
            		'<x>10</x>\n'+'<y>390</y>\n'+
            		'<width>180</width>\n'+
            		'<height>77</height>\n'+
            		'<text>Cancel</text>\n'+
            		'</promptButton>';
            $.ajax({ type : httpRequestType,
                url: url,
                data: httpRequestBody,
                async: false,
                dataType: "text",   //have to do 'text' in order to show raw response
                success : function(response) {
                    $("#getPromptButtonRequest").text(httpRequestType + " " + url);
                    $("#postPromptButtonRequestBody").text(httpRequestBody);
                    $("#getPromptButtonResponse").text(response);
                }
            });
        }

        function APIpromptEvent(){
        	var url = terminalHostname + '/cgi-bin/prompt/event';
            var httpRequestType = "POST";
            var httpRequestBody ='<?xml version="1.0"?>\n'+
            		'<promptEvent>\n'+
            		'<timeout>10</timeout>\n'+
            		'</promptEvent>';
            $.ajax({ type : httpRequestType,
                url: url,
                data: httpRequestBody,
                async: false,
                dataType: "text",   //have to do 'text' in order to show raw response
                success : function(response) {
                    $("#getPromptEventRequest").text(httpRequestType + " " + url);
                    $("#postPromptEventRequestBody").text(httpRequestBody);
                    $("#getPromptEventResponse").text(response);
                }
            });
        }

    function simpleButton(){
        $( "#ID1" ).html( 'Click on the [Cancel] button' );

        $.ajax({
            url: '/cgi-bin/page/show',
            data: 'path=sdk/one_button.html',
            async: false,
            dataType: "text"
        });

        $.ajax({
            url: '/cgi-bin/prompt/clear',
            async: false,
            dataType: "text"
        });

    	$.ajax({
            url: '/cgi-bin/prompt/button',
            type: "POST",
            data: '<?xml version="1.0"?><promptButton><name>userResponse</name><x>10</x><y>390</y><width>180</width><height>77</height><text>Cancel</text></promptButton>',
            async: false,
            dataType: "text"
        });
    	 
        $.ajax({
            url: '/cgi-bin/prompt/event',
            type: "POST",
            async: false,
            data: '<?xml version="1.0"?><promptEvent><timeout>10</timeout></promptEvent>',
            success: function( data ) {
                $("#getSampleEventResponse").text(data);
            },
            dataType: "text"
        });
    }

  </script>
    <title></title>
</head>
<body>

<div class="container-fluid">
    <div id="sidebar-menu" class="col-md-3 hidden-xs hidden-sm">
        <ul class="main-menu nav nav-stacked affix">
        </ul>
    </div>
    <div id="static-content" class="col-md-9">
    <h1 id="par-1">Summary of Functions</h1>
	<ul>
	  <li>A function to call <b><i>prompt/clear</i></b> to clear out all pending touch input areas
	  <li>A function to call <b><i>prompt/button</i></b> to set up a touch input area on a page shown via page/show
	  <li>A function to call <b><i>prompt/event</i></b> to wait for a touch input and display the response
	</ul>
	<p>
	From the document <b>Luxe 8000i HTTP API Specification - Appendix C - Generating Pages that Prompt for Input</b><br>
	<hr>
	Screens that prompt for touch screen input may either be generated
	<ol>
	  <li>at run time by the POS application
	calling the various <b><i>prompt/*</i></b> functions directly as described in this section to build up the
	screen, or
	  <li>by using the Equinox PageBuilder tools to pre-generate an HTML5 page.  Page built with
	PageBuilder will have calls to the various <b><i>prompt/*</i></b> functions via JavaScript functions
	built in to the compiled page.  This pre-generated page can then be called up using the <b><i>page/show</i></b> function.
	</ol>
	
	<p>
	<h1 id="par-2">1. POS Generated pages with POS calls to enable prompts</h1>
	<div class="featurette">
            <div class="function-explanation">Show a page with static images and text</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default"  onclick="APIpageShow()">page/show</button>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getPageShowRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getPageShowResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
    </div>
	<div class="featurette">
            <div class="function-explanation">This function clears all previously defined touch input areas.
	        This call usually preceeds all other prompt functions.</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default"  onclick="APIpromptClear()">prompt/clear</button>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getPromptClearRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getPromptClearResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
    </div>
	<div class="featurette">
            <div class="function-explanation">Add an area where touch input will be enabled.</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default"  onclick="APIpromptButton()">prompt/button</button>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getPromptButtonRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
                
                <b>HTTP Request body</b>
                <pre id="postPromptButtonRequestBody" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getPromptButtonResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
    </div>
	<div class="featurette">
            <div class="function-explanation">Activate the touch input area and wait for an event.</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default"  onclick="APIpromptEvent()">prompt/event</button>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getPromptEventRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
                
                <b>HTTP Request body</b>
                <pre id="postPromptEventRequestBody" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getPromptEventResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
    </div>
	<div class="featurette">
            <div class="function-explanation">Or click.</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default"  onclick="simpleButton();">this button</button>
            </form>to run all of the above.
            

            <div style="margin-top: 5px;">
                <b>HTTP Response</b>
                <pre id="getSampleEventResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
    </div>
	<p>&nbsp;<p>
	<h1 id="par-2">2. PageBuilder Generated pages with embedded JavaScript calls to enable prompts</h1>
	
	<table cellpadding='8' cellspacing='0'>
	  <tr>
	    <th align='left' bgcolor='lightgrey'>Function</th><th align='left' bgcolor='lightgrey'>Description</th>
	  </tr>
	  <tr>
	    <td valign='top'>page/show</td>
	    <td>
	      <table callpadding='20' cellspacing='5'>
	        <tr>
	          <td valign='top'>
	            Show a page with embedded JavaScript.  Wheh the page
	            is loaded, the JavaScript function loadPage() will
	            make the following calls:- &gt;
	          </td>
	          <td>
	            <table cellpadding='5' cellspacing='0'>
	              <tr><td valign='top'>promptButton()</td><td>Add first touch input area</td></tr>
	              <tr><td valign='top'>promptButton()</td><td>Add second touch input area</td></tr>
	              <tr><td valign='top'>promptEvent()</td><td>Enable touch input and wait for an event</td></tr>
	            </table>
	          </td>
	        <tr>
	      </table>
	    </td>
	  </tr>
	  <tr>
	    <td></td>
	    <td>
	      The page's JavaScript will process the touch events as defined in the page
	      definitions and call the specified actions that may be linked to the events.
	      This include a call to the fireEvent() function which will return an event
	      back to the POS through the POS' call to the <b><i>page/event</i></b> function.
	    </td>
	  </tr>
	  <tr>
	    <td valign='top'>page/event</td>
	    <td>Wait for an event from the page.  When the JavaScript in the page calls
	        fireEvent() the list of events will be returned.
	    </td>
	  </tr>
	</table>
	<p>&nbsp;<p>
	From the above, you can see that the POS interface can be greatly simplified(one call
	to <b><i>page/show</i></b> and one call to <b><i>page/event</i></b> by offloading much of the
	prompting function to JavaScript embedded within a web page.
	<p>
    </div>
 </div>

</body>
</html>