<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="/html/sdk/assets/css/styles.css">
    <link rel="stylesheet" href="/html/sdk/components/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/html/sdk/components/bootstrap-3.3.7/css/bootstrap-theme.min.css">

    <script type="text/javascript" src="/html/sdk/components/jquery-2.2.4/jquery.js"></script>
    <script type="text/javascript" src="/html/sdk/components/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/html/sdk/components/mustache-2.3.0/mustache.min.js"></script>

    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/ace.js"></script>
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/ext-static_highlight.js"></script>
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/mode-xml.js"></script>
    <!--<script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/mode-javascript.js"></script>-->
    <!--<script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/theme-monokai.js"></script>-->
    <script type="text/javascript" charset="utf-8" src="/html/sdk/components/ace-builds-18.06.17/src-min-noconflict/theme-chrome.js"></script>

    <script type="text/javascript" src="/html/sdk/assets/js/app.js"></script>

    <script type="text/javascript">
        function onGetSecureResources(type) {
            var filter;
            var url = terminalHostname + "/cgi-bin/platform/resource?function=list";
            var httpRequestType = "GET";
            $.ajax({ type : httpRequestType,
                url: url,
                data : {type: type},
                dataType: "text",   //have to do 'text' in order to show raw response
                success : function(response) {
                    $("#getSecureResourcesRequest").text(httpRequestType + " " + this.url);
                    $("#getSecureResourcesResponse").text(response);

                    doHighlightByIds(["getSecureResourcesRequest", "getSecureResourcesResponse"]);
                }
            });
        }

        function onGetDir() {
            var url = terminalHostname + "/cgi-bin/file/dir";
            var httpRequestType = "GET";
            var dirName = $("#getDirName").val();
            $.ajax({ type : httpRequestType,
                url: url,
                data : {"path" : dirName},
                dataType: "text",   //have to do 'text' in order to show raw response
                success : function(response) {
                    $("#getDirRequest").text(httpRequestType + " " + this.url);
                    $("#getDirResponse").text(response);

                    doHighlightByIds(["getDirRequest", "getDirResponse"]);
                }
            });
        }

        function onLocalFileSelect() {
            var fileInput = document.getElementById("localFileToUpload");
            $("#putFileLocalFileName").text(fileInput.files[0].name);
        }

        function onPutFile() {
            var fileInput = document.getElementById("localFileToUpload");
            var file = fileInput.files[0];

            var formData = new FormData();
            // add assoc key values, this will be posts values
            formData.append("file", file, file.name);

            var appName = $("#putFileAppName").val();
            var fileName = $("#putFileFileName").val();

            var url = terminalHostname + "/cgi-bin/file/put?path=" + appName + "/files/" + fileName;
            var httpRequestType = "POST";
            $.ajax({ type : httpRequestType,
                url: url,
                data : formData,
//                dataType: "text",   //have to do 'text' in order to show raw response
                processData: false,  // tell jQuery not to process the data
                contentType: false,  // tell jQuery not to set contentType
                success : function(response) {
                    $("#putFileRequest").text(httpRequestType + " " + this.url);
                    $("#putFileResponse").text(response);

                    doHighlightByIds(["putFileRequest", "putFileResponse"]);
                }
            });
        }

        function onGetFile() {
            var appName = $("#getFileAppName").val();
            var fileName = $("#getFileFileName").val();

            var url = terminalHostname + "/cgi-bin/file/get?path=" + appName + "/files/" + fileName;
            window.open(url, "_blank");
        }
    </script>
</head>
<body>
<div class="container-fluid">
    <div id="sidebar-menu" class="col-md-2 hidden-xs hidden-sm">
        <ul class="main-menu nav nav-stacked affix">
        </ul>
    </div>
    <div id="static-content" class="col-md-10">
        <h1 id="par-1">Platform functions</h1>
        <h2 id="sub-par-1-1">List secure resources loaded in SOS</h2>
        <div class="featurette">
            <div class="function-explanation">This function shows secure resources loaded in SOS</div>
            <form class="form-inline">
                <button type="button" class="btn btn-default" onclick="onGetSecureResources('background')">Get Backgrounds</button>
                <button type="button" class="btn btn-default" onclick="onGetSecureResources('keyboard')">Get Keyboards</button>
                <button type="button" class="btn btn-default" onclick="onGetSecureResources('font')">Get Fonts</button>
                <button type="button" class="btn btn-default" onclick="onGetSecureResources()">Get all</button>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getSecureResourcesRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getSecureResourcesResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
        </div>
        <h1 id="par-2">File functions</h1>
        <h2 id="sub-par-2-1">File directory listing</h2>
        <div class="featurette">
            <div class="function-explanation">This function returns directory content</div>
            <form class="form-inline">
                <div class="form-group">
                    <label for="getDirName">Directory name</label>
                    <input type="text" class="form-control" id="getDirName" placeholder="enter directory name">
                </div>
                <button type="button" class="btn btn-default" onclick="onGetDir()">Send</button>
                <div class="note">Directories are relative to /home/ directory. Example enter 'sdk/html' for /home/sdk/html/ directory.</div>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getDirRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getDirResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
        </div>
        <h2 id="sub-par-2-2">Upload file</h2>
        <div class="featurette">
            <div class="function-explanation">This function uploads file to terminal directory. Terminal directory targeted is /home/&lt;appName&gt;/files/</div>
            <form class="form-inline">
                <div class="form-group">
                    <label class="btn btn-default">Local file<input type="file" id="localFileToUpload" style="display: none;" onchange="onLocalFileSelect()"></label>
                    <span id="putFileLocalFileName"></span>
                </div>
                <!--<div class="form-group">-->
                    <!--<label for="putFileDirName">Terminal directory name</label>-->
                    <!--<input type="text" class="form-control" id="putFileDirName" placeholder="enter directory name">-->
                <!--</div>-->
                <div class="form-group">
                    <label for="putFileAppName">Application name</label>
                    <input type="text" class="form-control" id="putFileAppName" placeholder="enter application name">
                </div>
                <div class="form-group">
                    <label for="putFileFileName">Terminal file name</label>
                    <input type="text" class="form-control" id="putFileFileName" placeholder="enter file name">
                </div>
                <button type="button" class="btn btn-default" onclick="onPutFile()">Upload</button>
                <div class="note">Terminal directories are relative to /home/ directory. Example enter 'sdk/html' for /home/sdk/html/ directory.</div>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="putFileRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="putFileResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
        </div>
        <h2 id="sub-par-2-3">Get file</h2>
        <div class="featurette">
            <div class="function-explanation">This function gets file from terminal directory. Terminal directory targeted is /home/&lt;appName&gt;/files/.</div>
            <form class="form-inline">
                <!--<div class="form-group">-->
                    <!--<label for="getFileDirName">Terminal directory name</label>-->
                    <!--<input type="text" class="form-control" id="getFileDirName" placeholder="enter directory name">-->
                <!--</div>-->
                <div class="form-group">
                    <label for="getFileAppName">Application name</label>
                    <input type="text" class="form-control" id="getFileAppName" placeholder="enter application name">
                </div>
                <div class="form-group">
                    <label for="getFileFileName">Terminal file name</label>
                    <input type="text" class="form-control" id="getFileFileName" placeholder="enter file name">
                </div>
                <button type="button" class="btn btn-default" onclick="onGetFile()">Download</button>
                <div class="note">Directories are relative to /home/ directory. Example enter 'sdk/html' for /home/sdk/html/ directory.</div>
            </form>

            <div style="margin-top: 5px;">
                <b>HTTP Request</b>
                <pre id="getFileRequest" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>

                <b>HTTP Response</b>
                <pre id="getFileResponse" class="highlight-code" ace-mode="ace/mode/xml" ace-theme="ace/theme/chrome" ace-gutter="true"></pre>
            </div>
        </div>
    </div>
</div>
</body>
</html>